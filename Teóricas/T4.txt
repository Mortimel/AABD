CREATE TABLE CAIXA (DATA DATE, QUANT_TOTAL NUMBER, TOTAL_RECEBIDO NUMBER);

CREATE TRIGGER TRIGGER1
AFTER INSERT OR UPDATE OR DELETE OF DATA_VENDA, QUANTIDADE, TOTAL ON VENDAS

BEGIN
	DELETE FROM CAIXA;
	INSERT INTO CAIXA 
		SELECT DATA_VENDA, SUM(QUANTIDADE), SUM(TOTAL)
		FROM VENDAS
		GROUP BY DATA;		
END;


______________________OU_____________________________


CREATE TRIGGER TRIGGER1
AFTER INSERT OR UPDATE OR DELETE OF DATA_VENDA, QUANTIDADE, TOTAL ON VENDAS
FOR EACH ROW
BEGIN
	IF INSERTING THEN
		UPDATE CAIXA
			SET QUANT_TOTAL = QUANT_TOTAL + :NEW.QUANTIDADE,
			TOTAL_RECEBIDO = TOTAL_RECEBIDO + :NEW.TOTAL
		WHERE DATA = :NEW.DATA;
	END IF;
	IF DELETINg THEN 
		UPDATE CAIXA
			SET QUANT_TOTAL = QUANT_TOTAL - :OLD.QUANTIDADE,
			TOTAL_RECEBIDO = TOTAL_RECEBIDO - :OLD.TOTAL
		WHERE DATA = :NEW.DATA;
		